{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.regexp.constructor.js","webpack:///./src/views/search/components/search-suggestion.vue?16d8","webpack:///./src/views/search/index.vue?6b64","webpack:///./src/views/search/index.vue?2fd2","webpack:///./src/views/search/components/search-history.vue?3885","webpack:///src/views/search/components/search-history.vue","webpack:///./src/views/search/components/search-history.vue?3aca","webpack:///./src/views/search/components/search-history.vue","webpack:///./src/views/search/components/search-suggestion.vue?214c","webpack:///./src/api/search.js","webpack:///src/views/search/components/search-suggestion.vue","webpack:///./src/views/search/components/search-suggestion.vue?529f","webpack:///./src/views/search/components/search-suggestion.vue","webpack:///./src/views/search/components/search-result.vue?5e58","webpack:///src/views/search/components/search-result.vue","webpack:///./src/views/search/components/search-result.vue?4990","webpack:///./src/views/search/components/search-result.vue","webpack:///src/views/search/index.vue","webpack:///./src/views/search/index.vue?2b70","webpack:///./src/views/search/index.vue"],"names":["DESCRIPTORS","global","isForced","inheritIfRequired","defineProperty","f","getOwnPropertyNames","isRegExp","getFlags","stickyHelpers","redefine","fails","setInternalState","set","setSpecies","wellKnownSymbol","MATCH","NativeRegExp","RegExp","RegExpPrototype","prototype","re1","re2","CORRECT_NEW","UNSUPPORTED_Y","FORCED","RegExpWrapper","pattern","flags","sticky","thisIsRegExp","this","patternIsRegExp","flagsAreUndefined","undefined","constructor","source","call","indexOf","replace","result","proxy","key","configurable","get","it","keys","index","length","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","on","onSearch","onCancel","$event","isResultShow","model","value","callback","$$v","searchText","expression","searchHistories","staticRenderFns","$emit","_v","isDeleteShow","_l","item","onSearchItemClick","directives","name","rawName","components","props","type","Array","required","data","methods","splice","component","text","domProps","_s","highlight","slot","getSearchSuggestions","q","request","method","url","params","getSearchResult","String","suggestions","watch","handler","loadSearchSuggestions","immediate","reg","highlightStr","finished","error","onLoad","loading","article","ArticleItem","list","page","perPage","SearchHistory","SearchSuggestion","SearchResult","val","unshift","$router","back"],"mappings":"qGAAA,IAAIA,EAAc,EAAQ,QACtBC,EAAS,EAAQ,QACjBC,EAAW,EAAQ,QACnBC,EAAoB,EAAQ,QAC5BC,EAAiB,EAAQ,QAAuCC,EAChEC,EAAsB,EAAQ,QAA8CD,EAC5EE,EAAW,EAAQ,QACnBC,EAAW,EAAQ,QACnBC,EAAgB,EAAQ,QACxBC,EAAW,EAAQ,QACnBC,EAAQ,EAAQ,QAChBC,EAAmB,EAAQ,QAA+BC,IAC1DC,EAAa,EAAQ,QACrBC,EAAkB,EAAQ,QAE1BC,EAAQD,EAAgB,SACxBE,EAAehB,EAAOiB,OACtBC,EAAkBF,EAAaG,UAC/BC,EAAM,KACNC,EAAM,KAGNC,EAAc,IAAIN,EAAaI,KAASA,EAExCG,EAAgBf,EAAce,cAE9BC,EAASzB,GAAeE,EAAS,UAAYqB,GAAeC,GAAiBb,GAAM,WAGrF,OAFAW,EAAIN,IAAS,EAENC,EAAaI,IAAQA,GAAOJ,EAAaK,IAAQA,GAAiC,QAA1BL,EAAaI,EAAK,SAKnF,GAAII,EAAQ,CACV,IAAIC,EAAgB,SAAgBC,EAASC,GAC3C,IAGIC,EAHAC,EAAeC,gBAAgBL,EAC/BM,EAAkBzB,EAASoB,GAC3BM,OAA8BC,IAAVN,EAGxB,IAAKE,GAAgBE,GAAmBL,EAAQQ,cAAgBT,GAAiBO,EAC/E,OAAON,EAGLJ,EACES,IAAoBC,IAAmBN,EAAUA,EAAQS,QACpDT,aAAmBD,IACxBO,IAAmBL,EAAQpB,EAAS6B,KAAKV,IAC7CA,EAAUA,EAAQS,QAGhBZ,IACFK,IAAWD,GAASA,EAAMU,QAAQ,MAAQ,EACtCT,IAAQD,EAAQA,EAAMW,QAAQ,KAAM,MAG1C,IAAIC,EAASrC,EACXoB,EAAc,IAAIN,EAAaU,EAASC,GAASX,EAAaU,EAASC,GACvEE,EAAeC,KAAOZ,EACtBO,GAKF,OAFIF,GAAiBK,GAAQjB,EAAiB4B,EAAQ,CAAEX,OAAQA,IAEzDW,GAELC,EAAQ,SAAUC,GACpBA,KAAOhB,GAAiBtB,EAAesB,EAAegB,EAAK,CACzDC,cAAc,EACdC,IAAK,WAAc,OAAO3B,EAAayB,IACvC7B,IAAK,SAAUgC,GAAM5B,EAAayB,GAAOG,MAGzCC,EAAOxC,EAAoBW,GAC3B8B,EAAQ,EACZ,MAAOD,EAAKE,OAASD,EAAON,EAAMK,EAAKC,MACvC5B,EAAgBgB,YAAcT,EAC9BA,EAAcN,UAAYD,EAC1BT,EAAST,EAAQ,SAAUyB,GAI7BZ,EAAW,W,6DCnFX,yBAA4lB,EAAG,G,yDCA/lB,yBAA2jB,EAAG,G,yCCA9jB,IAAImC,EAAS,WAAa,IAAIC,EAAInB,KAASoB,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,oBAAoB,CAACF,EAAG,OAAO,CAACE,YAAY,cAAcC,MAAM,CAAC,OAAS,MAAM,CAACH,EAAG,aAAa,CAACG,MAAM,CAAC,cAAc,GAAG,YAAc,WAAW,WAAa,WAAWC,GAAG,CAAC,OAASP,EAAIQ,SAAS,OAASR,EAAIS,SAAS,MAAQ,SAASC,GAAQV,EAAIW,cAAe,IAAQC,MAAM,CAACC,MAAOb,EAAc,WAAEc,SAAS,SAAUC,GAAMf,EAAIgB,WAAWD,GAAKE,WAAW,iBAAiB,GAAIjB,EAAgB,aAAEG,EAAG,gBAAgB,CAACG,MAAM,CAAC,cAAcN,EAAIgB,cAAehB,EAAc,WAAEG,EAAG,oBAAoB,CAACG,MAAM,CAAC,cAAcN,EAAIgB,YAAYT,GAAG,CAAC,OAASP,EAAIQ,YAAYL,EAAG,iBAAiB,CAACG,MAAM,CAAC,mBAAmBN,EAAIkB,iBAAiBX,GAAG,CAAC,yBAAyB,SAASG,GAAQV,EAAIkB,gBAAkB,IAAI,OAASlB,EAAIQ,aAAa,IAC10BW,EAAkB,GCDlB,G,oBAAS,WAAa,IAAInB,EAAInB,KAASoB,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,kBAAkB,CAACF,EAAG,WAAW,CAACG,MAAM,CAAC,MAAQ,SAAS,CAAEN,EAAgB,aAAEG,EAAG,MAAM,CAACA,EAAG,OAAO,CAACI,GAAG,CAAC,MAAQ,SAASG,GAAQ,OAAOV,EAAIoB,MAAM,6BAA6B,CAACpB,EAAIqB,GAAG,UAAUrB,EAAIqB,GAAG,KAAKlB,EAAG,OAAO,CAACI,GAAG,CAAC,MAAQ,SAASG,GAAQV,EAAIsB,cAAe,KAAS,CAACtB,EAAIqB,GAAG,UAAUlB,EAAG,WAAW,CAACG,MAAM,CAAC,KAAO,UAAUC,GAAG,CAAC,MAAQ,SAASG,GAAQV,EAAIsB,cAAe,OAAU,GAAGtB,EAAIuB,GAAIvB,EAAmB,iBAAE,SAASwB,EAAK3B,GAAO,OAAOM,EAAG,WAAW,CAACX,IAAIK,EAAMS,MAAM,CAAC,MAAQkB,GAAMjB,GAAG,CAAC,MAAQ,SAASG,GAAQ,OAAOV,EAAIyB,kBAAkBD,EAAM3B,MAAU,CAACM,EAAG,WAAW,CAACuB,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAASf,MAAOb,EAAgB,aAAEiB,WAAW,iBAAiBX,MAAM,CAAC,KAAO,YAAY,OAAM,KACxzB,EAAkB,GCqBtB,GACEqB,KAAM,gBACNE,WAAY,GACZC,MAAO,CAQLZ,gBAAiB,CACfa,KAAMC,MACNC,UAAU,IAGdC,KAhBF,WAiBI,MAAO,CACLZ,cAAc,IAGlBa,QAAS,CACPV,kBADJ,SACA,KACU5C,KAAKyC,aAEPzC,KAAKqC,gBAAgBkB,OAAOvC,EAAO,GAGnChB,KAAKuC,MAAM,SAAUI,MClDyV,I,YCOlXa,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,WACA,MAIa,EAAAA,E,QClBX,EAAS,WAAa,IAAIrC,EAAInB,KAASoB,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,qBAAqBL,EAAIuB,GAAIvB,EAAe,aAAE,SAASsC,EAAKzC,GAAO,OAAOM,EAAG,WAAW,CAACX,IAAIK,EAAMS,MAAM,CAAC,KAAO,UAAUC,GAAG,CAAC,MAAQ,SAASG,GAAQ,OAAOV,EAAIoB,MAAM,SAAUkB,MAAS,CAACnC,EAAG,MAAM,CAACG,MAAM,CAAC,KAAO,SAASiC,SAAS,CAAC,UAAYvC,EAAIwC,GAAGxC,EAAIyC,UAAUH,KAAQI,KAAK,eAAc,IACtZ,EAAkB,G,4ECITC,EAAuB,SAAAC,GAClC,OAAOC,eAAQ,CACbC,OAAQ,MACRC,IAAK,uBACLC,OAAQ,CACNJ,QAKOK,EAAkB,SAAAD,GAC7B,OAAOH,eAAQ,CACbC,OAAQ,MACRC,IAAK,mBACLC,Y,YCKJ,GACErB,KAAM,mBACNG,MAAO,CACLd,WAAY,CACVe,KAAMmB,OACNjB,UAAU,IAGdC,KARF,WASI,MAAO,CACLiB,YAAa,KAGjBC,MAAO,CACLpC,WAAY,CAKVqC,QAAS,OAAf,cAAe,EAAf,YACQxE,KAAKyE,sBAAsBzC,KACnC,KAIM0C,WAAW,IAGfpB,QAAS,CACP,sBADJ,SACA,4LAEA,KAFA,gBAEA,EAFA,EAEA,KACA,6BAHA,mDAKA,yBALA,4DASIM,UAVJ,SAUA,GACM,IAAN,4DAKA,mCACM,OAAOH,EAAKjD,QAAQmE,EAAKC,MCrE0V,ICQrX,G,UAAY,eACd,EACA,EACA,GACA,EACA,KACA,WACA,OAIa,I,QCnBX,EAAS,WAAa,IAAIzD,EAAInB,KAASoB,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACF,EAAG,WAAW,CAACG,MAAM,CAAC,SAAWN,EAAI0D,SAAS,gBAAgB,QAAQ,MAAQ1D,EAAI2D,MAAM,aAAa,cAAcpD,GAAG,CAAC,eAAe,SAASG,GAAQV,EAAI2D,MAAMjD,GAAQ,KAAOV,EAAI4D,QAAQhD,MAAM,CAACC,MAAOb,EAAW,QAAEc,SAAS,SAAUC,GAAMf,EAAI6D,QAAQ9C,GAAKE,WAAW,YAAYjB,EAAIuB,GAAIvB,EAAQ,MAAE,SAAS8D,EAAQjE,GAAO,OAAOM,EAAG,eAAe,CAACX,IAAIK,EAAMS,MAAM,CAAC,QAAUwD,QAAa,IAAI,IAC5gB,EAAkB,G,wBCsBtB,GACEnC,KAAM,eACNE,WAAY,CACVkC,YAAJ,QAEEjC,MAAO,CACLd,WAAY,CACVe,KAAMmB,OACNjB,UAAU,IAGdC,KAXF,WAYI,MAAO,CACL8B,KAAM,GACNH,SAAS,EACTH,UAAU,EACVO,KAAM,EACNC,QAAS,GACTP,OAAO,IAGXxB,QAAS,CACP,OADJ,WACA,6LAGA,GACA,YACA,mBACA,iBANA,gBAGA,EAHA,EAGA,KAOA,kBACA,0CAGA,aAGA,SAEA,UAGA,cAtBA,qDA0BA,WAGA,aA7BA,+DC7CqX,ICOjX,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,WACA,MAIa,I,oBC8Bf,GACER,KAAM,cACNE,WAAY,CACVsC,cAAJ,EACIC,iBAAJ,EACIC,aAAJ,GAEEnC,KAPF,WAQI,MAAO,CACLlB,WAAY,GACZL,cAAc,EACdO,gBAAiB,OAAvB,OAAuB,CAAvB,kCAGEkC,MAAO,CACLlC,gBADJ,SACA,GACM,OAAN,OAAM,CAAN,gCAGEiB,QAAS,CACP3B,SADJ,SACA,GACM3B,KAAKmC,WAAasD,EAIlB,IAAN,mCACqB,IAAXzE,GACFhB,KAAKqC,gBAAgBkB,OAAOvC,EAAO,GAErChB,KAAKqC,gBAAgBqD,QAAQD,GAG7BzF,KAAK8B,cAAe,GAGtBF,SAhBJ,WAiBM5B,KAAK2F,QAAQC,UCpF2U,ICQ1V,G,UAAY,eACd,EACA1E,EACAoB,GACA,EACA,KACA,WACA,OAIa,e","file":"js/chunk-aba4b322.17d12e46.js","sourcesContent":["var DESCRIPTORS = require('../internals/descriptors');\nvar global = require('../internals/global');\nvar isForced = require('../internals/is-forced');\nvar inheritIfRequired = require('../internals/inherit-if-required');\nvar defineProperty = require('../internals/object-define-property').f;\nvar getOwnPropertyNames = require('../internals/object-get-own-property-names').f;\nvar isRegExp = require('../internals/is-regexp');\nvar getFlags = require('../internals/regexp-flags');\nvar stickyHelpers = require('../internals/regexp-sticky-helpers');\nvar redefine = require('../internals/redefine');\nvar fails = require('../internals/fails');\nvar setInternalState = require('../internals/internal-state').set;\nvar setSpecies = require('../internals/set-species');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar MATCH = wellKnownSymbol('match');\nvar NativeRegExp = global.RegExp;\nvar RegExpPrototype = NativeRegExp.prototype;\nvar re1 = /a/g;\nvar re2 = /a/g;\n\n// \"new\" should create a new object, old webkit bug\nvar CORRECT_NEW = new NativeRegExp(re1) !== re1;\n\nvar UNSUPPORTED_Y = stickyHelpers.UNSUPPORTED_Y;\n\nvar FORCED = DESCRIPTORS && isForced('RegExp', (!CORRECT_NEW || UNSUPPORTED_Y || fails(function () {\n  re2[MATCH] = false;\n  // RegExp constructor can alter flags and IsRegExp works correct with @@match\n  return NativeRegExp(re1) != re1 || NativeRegExp(re2) == re2 || NativeRegExp(re1, 'i') != '/a/i';\n})));\n\n// `RegExp` constructor\n// https://tc39.github.io/ecma262/#sec-regexp-constructor\nif (FORCED) {\n  var RegExpWrapper = function RegExp(pattern, flags) {\n    var thisIsRegExp = this instanceof RegExpWrapper;\n    var patternIsRegExp = isRegExp(pattern);\n    var flagsAreUndefined = flags === undefined;\n    var sticky;\n\n    if (!thisIsRegExp && patternIsRegExp && pattern.constructor === RegExpWrapper && flagsAreUndefined) {\n      return pattern;\n    }\n\n    if (CORRECT_NEW) {\n      if (patternIsRegExp && !flagsAreUndefined) pattern = pattern.source;\n    } else if (pattern instanceof RegExpWrapper) {\n      if (flagsAreUndefined) flags = getFlags.call(pattern);\n      pattern = pattern.source;\n    }\n\n    if (UNSUPPORTED_Y) {\n      sticky = !!flags && flags.indexOf('y') > -1;\n      if (sticky) flags = flags.replace(/y/g, '');\n    }\n\n    var result = inheritIfRequired(\n      CORRECT_NEW ? new NativeRegExp(pattern, flags) : NativeRegExp(pattern, flags),\n      thisIsRegExp ? this : RegExpPrototype,\n      RegExpWrapper\n    );\n\n    if (UNSUPPORTED_Y && sticky) setInternalState(result, { sticky: sticky });\n\n    return result;\n  };\n  var proxy = function (key) {\n    key in RegExpWrapper || defineProperty(RegExpWrapper, key, {\n      configurable: true,\n      get: function () { return NativeRegExp[key]; },\n      set: function (it) { NativeRegExp[key] = it; }\n    });\n  };\n  var keys = getOwnPropertyNames(NativeRegExp);\n  var index = 0;\n  while (keys.length > index) proxy(keys[index++]);\n  RegExpPrototype.constructor = RegExpWrapper;\n  RegExpWrapper.prototype = RegExpPrototype;\n  redefine(global, 'RegExp', RegExpWrapper);\n}\n\n// https://tc39.github.io/ecma262/#sec-get-regexp-@@species\nsetSpecies('RegExp');\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search-suggestion.vue?vue&type=style&index=0&id=372811c7&scoped=true&lang=less&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search-suggestion.vue?vue&type=style&index=0&id=372811c7&scoped=true&lang=less&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=55d8dd5a&scoped=true&lang=less&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=55d8dd5a&scoped=true&lang=less&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"search-container\"},[_c('form',{staticClass:\"search-form\",attrs:{\"action\":\"/\"}},[_c('van-search',{attrs:{\"show-action\":\"\",\"placeholder\":\"请输入搜索关键词\",\"background\":\"#3296fa\"},on:{\"search\":_vm.onSearch,\"cancel\":_vm.onCancel,\"focus\":function($event){_vm.isResultShow = false}},model:{value:(_vm.searchText),callback:function ($$v) {_vm.searchText=$$v},expression:\"searchText\"}})],1),(_vm.isResultShow)?_c('search-result',{attrs:{\"search-text\":_vm.searchText}}):(_vm.searchText)?_c('search-suggestion',{attrs:{\"search-text\":_vm.searchText},on:{\"search\":_vm.onSearch}}):_c('search-history',{attrs:{\"search-histories\":_vm.searchHistories},on:{\"clear-search-histories\":function($event){_vm.searchHistories = []},\"search\":_vm.onSearch}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"search-history\"},[_c('van-cell',{attrs:{\"title\":\"搜索历史\"}},[(_vm.isDeleteShow)?_c('div',[_c('span',{on:{\"click\":function($event){return _vm.$emit('clear-search-histories')}}},[_vm._v(\"全部删除\")]),_vm._v(\" \"),_c('span',{on:{\"click\":function($event){_vm.isDeleteShow = false}}},[_vm._v(\"完成\")])]):_c('van-icon',{attrs:{\"name\":\"delete\"},on:{\"click\":function($event){_vm.isDeleteShow = true}}})],1),_vm._l((_vm.searchHistories),function(item,index){return _c('van-cell',{key:index,attrs:{\"title\":item},on:{\"click\":function($event){return _vm.onSearchItemClick(item, index)}}},[_c('van-icon',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isDeleteShow),expression:\"isDeleteShow\"}],attrs:{\"name\":\"close\"}})],1)})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"search-history\">\n    <van-cell title=\"搜索历史\">\n      <div v-if=\"isDeleteShow\">\n        <span @click=\"$emit('clear-search-histories')\">全部删除</span>\n        &nbsp;&nbsp;\n        <span @click=\"isDeleteShow = false\">完成</span>\n      </div>\n      <van-icon v-else name=\"delete\" @click=\"isDeleteShow = true\" />\n    </van-cell>\n    <van-cell\n      :title=\"item\"\n      v-for=\"(item, index) in searchHistories\"\n      :key=\"index\"\n      @click=\"onSearchItemClick(item, index)\"\n    >\n      <van-icon v-show=\"isDeleteShow\" name=\"close\" />\n    </van-cell>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'SearchHistory',\n  components: {},\n  props: {\n    // Prop 是受父组件数据影响的\n    //   如果是普通数据（数字、字符串、布尔值）绝对不能修改\n    //   即便改了也不会传导给父组件\n    //\n    //   如果是引用类型数据（数组、对象）\n    //     可以修改，例如 [].push(xxx)，对象.xxx = xxx\n    //     但不能重新赋值, xxx = [],所以要发送给父组件，让父组件去完成赋值操作\n    searchHistories: {\n      type: Array,\n      required: true\n    }\n  },\n  data () {\n    return {\n      isDeleteShow: false // 控制删除显示状态\n    }\n  },\n  methods: {\n    onSearchItemClick (item, index) {\n      if (this.isDeleteShow) {\n        // 删除状态，删除历史记录数据\n        this.searchHistories.splice(index, 1)\n      } else {\n        // 非删除状态，直接进入搜索\n        this.$emit('search', item)\n      }\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"less\"></style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search-history.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search-history.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./search-history.vue?vue&type=template&id=4e3f2f3b&scoped=true&\"\nimport script from \"./search-history.vue?vue&type=script&lang=js&\"\nexport * from \"./search-history.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4e3f2f3b\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"search-suggestion\"},_vm._l((_vm.suggestions),function(text,index){return _c('van-cell',{key:index,attrs:{\"icon\":\"search\"},on:{\"click\":function($event){return _vm.$emit('search', text)}}},[_c('div',{attrs:{\"slot\":\"title\"},domProps:{\"innerHTML\":_vm._s(_vm.highlight(text))},slot:\"title\"})])}),1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/**\n * 用户相关请求模块\n */\nimport request from '@/utils/request'\n\nexport const getSearchSuggestions = q => {\n  return request({\n    method: 'GET',\n    url: '/app/v1_0/suggestion',\n    params: {\n      q\n    }\n  })\n}\n\nexport const getSearchResult = params => {\n  return request({\n    method: 'GET',\n    url: '/app/v1_0/search',\n    params\n  })\n}\n","<template>\n  <div class=\"search-suggestion\">\n    <van-cell\n      icon=\"search\"\n      v-for=\"(text, index) in suggestions\"\n      :key=\"index\"\n      @click=\"$emit('search', text)\"\n    >\n      <div slot=\"title\" v-html=\"highlight(text)\"></div>\n    </van-cell>\n    <!-- 双花括号绑定会直接输出纯文本内容 -->\n    <!-- <div>{{ htmlStr }}</div> -->\n\n    <!-- 使用 v-html 指令可以绑定渲染带有 HTML 标签的字符串 -->\n    <!-- <div v-html=\"htmlStr\"></div> -->\n  </div>\n</template>\n\n<script>\nimport { getSearchSuggestions } from '@/api/search'\n\n// 按需加载有好处：只会把使用到的成员打包到结果中\nimport { debounce } from 'lodash'\n\nexport default {\n  name: 'SearchSuggestion',\n  props: {\n    searchText: {\n      type: String,\n      required: true\n    }\n  },\n  data () {\n    return {\n      suggestions: [] // 联想建议数据列表\n    }\n  },\n  watch: {\n    searchText: {\n      // debounce 函数\n      // 参数1：函数\n      // 参数2：延迟时间，单位是毫秒\n      // 返回值：防抖之后的函数\n      handler: debounce(function (value) {\n        this.loadSearchSuggestions(value)\n      }, 200),\n      // handler (value) {\n      //   this.loadSearchSuggestions(value)\n      // },\n      immediate: true // 该回调将会在侦听开始之后被立即调用\n    }\n  },\n  methods: {\n    async loadSearchSuggestions (q) {\n      try {\n        const { data } = await getSearchSuggestions(q)\n        this.suggestions = data.data.options\n      } catch (err) {\n        this.$toast('数据获取失败，请稍后重试')\n      }\n    },\n\n    highlight (text) {\n      const highlightStr = `<span class=\"active\">${this.searchText}</span>`\n\n      // RegExp 正则表达式构造函数\n      //    参数1：匹配模式字符串，它会根据这个字符串创建正则对象\n      //    参数2：匹配模式\n      const reg = new RegExp(this.searchText, 'ig')\n      return text.replace(reg, highlightStr)\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"less\">\n.search-suggestion {\n  /deep/ span.active {\n    color: #3296fa;\n  }\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search-suggestion.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search-suggestion.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./search-suggestion.vue?vue&type=template&id=372811c7&scoped=true&\"\nimport script from \"./search-suggestion.vue?vue&type=script&lang=js&\"\nexport * from \"./search-suggestion.vue?vue&type=script&lang=js&\"\nimport style0 from \"./search-suggestion.vue?vue&type=style&index=0&id=372811c7&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"372811c7\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"search-result\"},[_c('van-list',{attrs:{\"finished\":_vm.finished,\"finished-text\":\"没有更多了\",\"error\":_vm.error,\"error-text\":\"加载失败，请点击重试\"},on:{\"update:error\":function($event){_vm.error=$event},\"load\":_vm.onLoad},model:{value:(_vm.loading),callback:function ($$v) {_vm.loading=$$v},expression:\"loading\"}},_vm._l((_vm.list),function(article,index){return _c('article-item',{key:index,attrs:{\"article\":article}})}),1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"search-result\">\n    <van-list\n      v-model=\"loading\"\n      :finished=\"finished\"\n      finished-text=\"没有更多了\"\n      :error.sync=\"error\"\n      error-text=\"加载失败，请点击重试\"\n      @load=\"onLoad\"\n    >\n      <article-item\n        v-for=\"(article, index) in list\"\n        :key=\"index\"\n        :article=\"article\"\n      />\n    </van-list>\n  </div>\n</template>\n\n<script>\nimport { getSearchResult } from '@/api/search'\nimport ArticleItem from '@/components/article-item'\n\nexport default {\n  name: 'SearchResult',\n  components: {\n    ArticleItem\n  },\n  props: {\n    searchText: {\n      type: String,\n      required: true\n    }\n  },\n  data () {\n    return {\n      list: [],\n      loading: false,\n      finished: false,\n      page: 1,\n      perPage: 20,\n      error: false\n    }\n  },\n  methods: {\n    async onLoad () {\n      try {\n        // 1. 请求获取数据\n        const { data } = await getSearchResult({\n          page: this.page, // 页码\n          per_page: this.perPage, // 每页大小\n          q: this.searchText // 查询关键词\n        })\n\n        // 2. 将数据添加到数组列表中\n        const { results } = data.data\n        this.list.push(...results)\n\n        // 3. 将本次加载中的 loading 关闭\n        this.loading = false\n\n        // 4. 判断是否还有数据\n        if (results.length) {\n          // 如果有，则更新获取下一个数据的页码\n          this.page += 1\n        } else {\n          // 如果没有，则将加载状态 finished 设置为结束\n          this.finished = true\n        }\n      } catch (err) {\n        // 展示加载失败的提示状态\n        this.error = true\n\n        // 加载失败了 loading 也要关闭\n        this.loading = false\n      }\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"less\"></style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search-result.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search-result.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./search-result.vue?vue&type=template&id=587dad06&scoped=true&\"\nimport script from \"./search-result.vue?vue&type=script&lang=js&\"\nexport * from \"./search-result.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"587dad06\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"search-container\">\n    <!-- 搜索栏 -->\n    <form class=\"search-form\" action=\"/\">\n      <van-search\n        v-model=\"searchText\"\n        show-action\n        placeholder=\"请输入搜索关键词\"\n        background=\"#3296fa\"\n        @search=\"onSearch\"\n        @cancel=\"onCancel\"\n        @focus=\"isResultShow = false\"\n      />\n    </form>\n    <!-- /搜索栏 -->\n\n    <!-- 搜索结果 -->\n    <search-result\n      v-if=\"isResultShow\"\n      :search-text=\"searchText\"\n    />\n    <!-- /搜索结果 -->\n\n    <!-- 联想建议 -->\n    <search-suggestion\n      v-else-if=\"searchText\"\n      :search-text=\"searchText\"\n      @search=\"onSearch\"\n    />\n    <!-- /联想建议 -->\n\n    <!-- 搜索历史记录 -->\n    <search-history\n      v-else\n      :search-histories=\"searchHistories\"\n      @clear-search-histories=\"searchHistories = []\"\n      @search=\"onSearch\"\n    />\n    <!-- /搜索历史记录 -->\n  </div>\n</template>\n\n<script>\nimport SearchHistory from './components/search-history'\nimport SearchSuggestion from './components/search-suggestion'\nimport SearchResult from './components/search-result'\nimport { setItem, getItem } from '@/utils/storage'\n\nexport default {\n  name: 'SearchIndex',\n  components: {\n    SearchHistory,\n    SearchSuggestion,\n    SearchResult\n  },\n  data () {\n    return {\n      searchText: '',\n      isResultShow: false, // 控制搜索结果的展示\n      searchHistories: getItem('TOUTIAO_SEARCH_HISTORIES') || [] // 搜索的历史记录数据\n    }\n  },\n  watch: {\n    searchHistories (value) {\n      setItem('TOUTIAO_SEARCH_HISTORIES', value)\n    }\n  },\n  methods: {\n    onSearch (val) {\n      this.searchText = val\n\n      // 存储搜索历史记录\n      // 要求：不要有重复历史记录、最新的排在最前面\n      const index = this.searchHistories.indexOf(val)\n      if (index !== -1) {\n        this.searchHistories.splice(index, 1)\n      }\n      this.searchHistories.unshift(val)\n\n      // 渲染搜索结果\n      this.isResultShow = true\n    },\n\n    onCancel () {\n      this.$router.back()\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"less\">\n.search-container {\n  padding-top: 108px;\n  .van-search__action {\n    color: #fff;\n  }\n  .search-form {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    z-index: 1;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=55d8dd5a&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=55d8dd5a&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"55d8dd5a\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}